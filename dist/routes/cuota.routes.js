"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const cuota_controller_1 = require("@/controllers/cuota.controller");
const cuota_service_1 = require("@/services/cuota.service");
const cuota_repository_1 = require("@/repositories/cuota.repository");
const recibo_repository_1 = require("@/repositories/recibo.repository");
const persona_repository_1 = require("@/repositories/persona.repository");
const configuracion_repository_1 = require("@/repositories/configuracion.repository");
const item_cuota_controller_1 = require("@/controllers/item-cuota.controller");
const item_cuota_service_1 = require("@/services/item-cuota.service");
const database_1 = require("@/config/database");
const router = (0, express_1.Router)();
const cuotaRepository = new cuota_repository_1.CuotaRepository(database_1.prisma);
const reciboRepository = new recibo_repository_1.ReciboRepository(database_1.prisma);
const personaRepository = new persona_repository_1.PersonaRepository(database_1.prisma);
const configuracionRepository = new configuracion_repository_1.ConfiguracionRepository(database_1.prisma);
const cuotaService = new cuota_service_1.CuotaService(cuotaRepository, reciboRepository, personaRepository, configuracionRepository);
const cuotaController = new cuota_controller_1.CuotaController(cuotaService);
const itemCuotaService = new item_cuota_service_1.ItemCuotaService();
const itemCuotaController = new item_cuota_controller_1.ItemCuotaController(itemCuotaService);
router.post('/', cuotaController.createCuota.bind(cuotaController));
router.get('/', cuotaController.getCuotas.bind(cuotaController));
router.get('/:id', cuotaController.getCuotaById.bind(cuotaController));
router.put('/:id', cuotaController.updateCuota.bind(cuotaController));
router.delete('/:id', cuotaController.deleteCuota.bind(cuotaController));
router.get('/search/avanzada', cuotaController.searchCuotas.bind(cuotaController));
router.get('/stats/resumen', cuotaController.getStatistics.bind(cuotaController));
router.get('/dashboard/principal', cuotaController.getDashboard.bind(cuotaController));
router.get('/pendientes/listado', cuotaController.getPendientes.bind(cuotaController));
router.get('/vencidas/listado', cuotaController.getVencidas.bind(cuotaController));
router.get('/periodos/disponibles', cuotaController.getPeriodosDisponibles.bind(cuotaController));
router.post('/generar/masiva', cuotaController.generarCuotas.bind(cuotaController));
router.post('/generar-v2', cuotaController.generarCuotasConItems.bind(cuotaController));
router.post('/calcular/monto', cuotaController.calcularMontoCuota.bind(cuotaController));
router.post('/recalcular/periodo', cuotaController.recalcularCuotas.bind(cuotaController));
router.post('/regenerar', cuotaController.regenerarCuotasDelPeriodo.bind(cuotaController));
router.post('/preview-recalculo', cuotaController.previewRecalculoCuotas.bind(cuotaController));
router.post('/:id/recalcular', cuotaController.recalcularCuotaById.bind(cuotaController));
router.get('/:id/comparar', cuotaController.compararCuotaConRecalculo.bind(cuotaController));
router.delete('/bulk/eliminar', cuotaController.deleteBulkCuotas.bind(cuotaController));
router.get('/reporte/:mes/:anio', cuotaController.generarReporte.bind(cuotaController));
router.get('/resumen/:mes/:anio', cuotaController.getResumenMensual.bind(cuotaController));
router.get('/validar/:mes/:anio/generacion', cuotaController.validarGeneracionCuotas.bind(cuotaController));
router.get('/recibo/:reciboId', cuotaController.getCuotaByReciboId.bind(cuotaController));
router.get('/socio/:socioId', cuotaController.getCuotasBySocio.bind(cuotaController));
router.get('/periodo/:mes/:anio', cuotaController.getCuotasPorPeriodo.bind(cuotaController));
router.get('/:cuotaId/items', itemCuotaController.getItemsByCuotaId.bind(itemCuotaController));
router.get('/:cuotaId/items/desglose', itemCuotaController.getDesgloseByCuotaId.bind(itemCuotaController));
router.get('/:cuotaId/items/segmentados', itemCuotaController.getItemsSegmentados.bind(itemCuotaController));
router.post('/:cuotaId/items', itemCuotaController.addManualItem.bind(itemCuotaController));
router.post('/:cuotaId/items/regenerar', itemCuotaController.regenerarItems.bind(itemCuotaController));
router.post('/:cuotaId/items/descuento-global', itemCuotaController.aplicarDescuentoGlobal.bind(itemCuotaController));
exports.default = router;
//# sourceMappingURL=cuota.routes.js.map
### SIGESDA API - Pruebas de Endpoints Aulas
### Base URL: http://localhost:3001

### 1. Health Check
GET http://localhost:3001/health

###################################################################
### CRUD AULAS - Casos de Prueba
###################################################################

### 2. Crear Aula Principal (con nuevos campos)
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "Aula Principal",
  "capacidad": 50,
  "ubicacion": "Planta Baja - Frente",
  "tipoAulaId": 1,
  "estadoAulaId": 1,
  "descripcion": "Aula principal para clases teóricas y prácticas",
  "observaciones": "Requiere reserva con 48h de anticipación",
  "activa": true
}

### 3. Crear Aula de Ensayos (sin campos opcionales)
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "Sala de Ensayos",
  "capacidad": 15,
  "ubicacion": "Primer Piso - Izquierda",
  "activa": true
}

### 4. Crear Aula Pequeña Sin Equipamiento
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "Aula 3 - Clases Individuales",
  "capacidad": 2,
  "ubicacion": "Primer Piso - Derecha",
  "activa": true
}

### 5. Crear Aula Grande Para Coro (con Equipamientos Array)
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "Sala de Coro",
  "capacidad": 60,
  "ubicacion": "Segundo Piso",
  "tipoAulaId": 4,
  "estadoAulaId": 1,
  "descripcion": "Sala especial para ensayos de coro con acústica optimizada",
  "observaciones": "Capacidad máxima 60 personas en formación coral",
  "activa": true,
  "equipamientos": [
    {
      "equipamientoId": 1,
      "cantidad": 1,
      "observaciones": "Piano de cola en excelente estado"
    },
    {
      "equipamientoId": 4,
      "cantidad": 60,
      "observaciones": "Atriles para partituras"
    },
    {
      "equipamientoId": 3,
      "cantidad": 30
    }
  ]
}

###################################################################
### VALIDACIONES Y CASOS DE ERROR
###################################################################

### 6. Error: Nombre Duplicado
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "Aula Principal",
  "capacidad": 20,
  "ubicacion": "Otro lugar"
}

### 7. Error: Capacidad Negativa
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "Aula Inválida",
  "capacidad": -5,
  "ubicacion": "Lugar inexistente"
}

### 8. Error: Capacidad Cero
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "Aula Sin Capacidad",
  "capacidad": 0,
  "ubicacion": "Test"
}

### 9. Error: Nombre Vacío
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "",
  "capacidad": 10,
  "ubicacion": "Test"
}

###################################################################
### CONSULTAS Y FILTROS
###################################################################

### 10. Listar Todas las Aulas
GET http://localhost:3001/api/aulas

### 11. Listar con Paginación
GET http://localhost:3001/api/aulas?page=1&limit=3

### 12. Filtrar Solo Aulas Activas
GET http://localhost:3001/api/aulas?activa=true

### 13. Filtrar por Capacidad Mínima
GET http://localhost:3001/api/aulas?capacidadMinima=30

### 14. Filtrar por Rango de Capacidad
GET http://localhost:3001/api/aulas?capacidadMinima=10&capacidadMaxima=50

### 15. Filtrar Solo Aulas con Equipamiento
GET http://localhost:3001/api/aulas?conEquipamiento=true

### 16. Filtrar Solo Aulas sin Equipamiento
GET http://localhost:3001/api/aulas?conEquipamiento=false

### 17. Buscar por Nombre/Ubicación/Equipamiento
GET http://localhost:3001/api/aulas?search=Piano

###################################################################
### ENDPOINTS ESPECÍFICOS
###################################################################

### 18. Obtener Aulas Disponibles
GET http://localhost:3001/api/aulas/disponibles

### 19. Obtener Aulas con Menor Uso
GET http://localhost:3001/api/aulas/menor-uso

### 20. Obtener Aulas con Equipamiento
GET http://localhost:3001/api/aulas/con-equipamiento

### 21. Buscar Aulas por Capacidad Específica
GET http://localhost:3001/api/aulas/por-capacidad?capacidad=15

### 22. Búsqueda Avanzada
GET http://localhost:3001/api/aulas/search?q=Ensayos

###################################################################
### OBTENER POR ID
###################################################################

### 23. Obtener Aula por ID (reemplazar {id} con ID real)
GET http://localhost:3001/api/aulas/{id}

### 24. Error: ID No Existente
GET http://localhost:3001/api/aulas/id-inexistente

###################################################################
### VERIFICAR DISPONIBILIDAD
###################################################################

### 25. Verificar Disponibilidad Futura (reemplazar {id} con ID real)
POST http://localhost:3001/api/aulas/{id}/verificar-disponibilidad
Content-Type: application/json

{
  "fechaInicio": "2025-09-26T10:00:00.000Z",
  "fechaFin": "2025-09-26T12:00:00.000Z"
}

### 26. Error: Fecha de Inicio en el Pasado
POST http://localhost:3001/api/aulas/{id}/verificar-disponibilidad
Content-Type: application/json

{
  "fechaInicio": "2025-09-20T10:00:00.000Z",
  "fechaFin": "2025-09-20T12:00:00.000Z"
}

### 27. Error: Fecha Fin Antes que Fecha Inicio
POST http://localhost:3001/api/aulas/{id}/verificar-disponibilidad
Content-Type: application/json

{
  "fechaInicio": "2025-09-26T12:00:00.000Z",
  "fechaFin": "2025-09-26T10:00:00.000Z"
}

###################################################################
### ESTADÍSTICAS Y RESERVAS
###################################################################

### 28. Obtener Estadísticas de Aula
GET http://localhost:3001/api/aulas/{id}/estadisticas

### 29. Obtener Reservas del Aula (próximo mes)
GET http://localhost:3001/api/aulas/{id}/reservas

### 30. Obtener Reservas en Período Específico
GET http://localhost:3001/api/aulas/{id}/reservas?fechaDesde=2025-09-26T00:00:00.000Z&fechaHasta=2025-10-26T23:59:59.000Z

###################################################################
### ACTUALIZACIÓN
###################################################################

### 31. Actualizar Información de Aula (nuevos campos)
PUT http://localhost:3001/api/aulas/{id}
Content-Type: application/json

{
  "ubicacion": "Planta Baja - Frente (renovado)",
  "descripcion": "Aula principal renovada con nuevos equipamientos",
  "observaciones": "Mantenimiento realizado en Nov 2025. Capacidad aumentada.",
  "estadoAulaId": 1
}

### 32. Aumentar Capacidad
PUT http://localhost:3001/api/aulas/{id}
Content-Type: application/json

{
  "capacidad": 55
}

### 33. Dar de Baja Aula (Soft Delete)
PUT http://localhost:3001/api/aulas/{id}
Content-Type: application/json

{
  "activa": false
}

### 34. Error: Actualizar con Nombre Duplicado
PUT http://localhost:3001/api/aulas/{id}
Content-Type: application/json

{
  "nombre": "Sala de Ensayos"
}

###################################################################
### ELIMINACIÓN
###################################################################

### 35. Baja Lógica (Soft Delete)
DELETE http://localhost:3001/api/aulas/{id}

### 36. Eliminación Física (Hard Delete) - ¡CUIDADO!
DELETE http://localhost:3001/api/aulas/{id}?hard=true

###################################################################
### CASOS ESPECIALES Y VALIDACIONES DE NEGOCIO
###################################################################

### 37. Crear Aula de Gran Capacidad
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "Auditorio Principal",
  "capacidad": 200,
  "ubicacion": "Planta Baja - Auditorio",
  "tipoAulaId": 5,
  "estadoAulaId": 1,
  "descripcion": "Auditorio principal para conciertos y eventos",
  "observaciones": "Requiere autorización del director para uso",
  "activa": true
}

### 38. Crear Aula Mínima (1 persona)
POST http://localhost:3001/api/aulas
Content-Type: application/json

{
  "nombre": "Cabina de Práctica Individual",
  "capacidad": 1,
  "ubicacion": "Sótano - Cabina 1",
  "tipoAulaId": 3,
  "estadoAulaId": 1,
  "descripcion": "Cabina insonorizada para práctica individual",
  "activa": true
}

### 39. Buscar Aulas Grandes (50+ personas)
GET http://localhost:3001/api/aulas?capacidadMinima=50

### 40. Buscar Aulas Pequeñas (1-5 personas)
GET http://localhost:3001/api/aulas?capacidadMinima=1&capacidadMaxima=5

### 41. Verificar Disponibilidad con Exclusión de Reserva
POST http://localhost:3001/api/aulas/{id}/verificar-disponibilidad
Content-Type: application/json

{
  "fechaInicio": "2025-09-26T14:00:00.000Z",
  "fechaFin": "2025-09-26T16:00:00.000Z",
  "excluirReservaId": "id-de-reserva-existente"
}

### 42. Buscar Aulas por Nombre/Ubicación/Descripción
GET http://localhost:3001/api/aulas/search?q=Principal

### 43. Aulas Ordenadas por Capacidad
GET http://localhost:3001/api/aulas?limit=100

###################################################################
### GESTIÓN DE EQUIPAMIENTOS EN AULAS
###################################################################

### 44. Asignar Equipamiento a Aula
POST http://localhost:3001/api/aulas/{id}/equipamientos
Content-Type: application/json

{
  "equipamientoId": 1,
  "cantidad": 1,
  "observaciones": "Piano de cola Yamaha en excelente estado"
}

### 45. Asignar Múltiples Equipamientos (ejecutar varias veces con diferentes IDs)
POST http://localhost:3001/api/aulas/{id}/equipamientos
Content-Type: application/json

{
  "equipamientoId": 3,
  "cantidad": 50,
  "observaciones": "Sillas para capacidad completa"
}

### 46. Asignar Equipamiento Sin Observaciones
POST http://localhost:3001/api/aulas/{id}/equipamientos
Content-Type: application/json

{
  "equipamientoId": 4,
  "cantidad": 30
}

### 47. Error: Asignar Equipamiento Ya Existente (duplicado)
POST http://localhost:3001/api/aulas/{id}/equipamientos
Content-Type: application/json

{
  "equipamientoId": 1,
  "cantidad": 1
}

### 48. Error: Asignar Equipamiento con Cantidad Inválida
POST http://localhost:3001/api/aulas/{id}/equipamientos
Content-Type: application/json

{
  "equipamientoId": 5,
  "cantidad": -5
}

### 49. Error: Asignar Equipamiento con ID Inexistente
POST http://localhost:3001/api/aulas/{id}/equipamientos
Content-Type: application/json

{
  "equipamientoId": 9999,
  "cantidad": 1
}

### 50. Error: Asignar Equipamiento a Aula Inexistente
POST http://localhost:3001/api/aulas/9999/equipamientos
Content-Type: application/json

{
  "equipamientoId": 1,
  "cantidad": 1
}

### 51. Obtener Equipamientos de Aula
GET http://localhost:3001/api/aulas/{id}/equipamientos

### 52. Obtener Equipamientos de Aula Sin Equipamientos
GET http://localhost:3001/api/aulas/{id}/equipamientos

### 53. Error: Obtener Equipamientos de Aula Inexistente
GET http://localhost:3001/api/aulas/9999/equipamientos

### 54. Actualizar Cantidad de Equipamiento en Aula
PUT http://localhost:3001/api/aulas/{id}/equipamientos/{equipamientoId}
Content-Type: application/json

{
  "cantidad": 60,
  "observaciones": "Cantidad actualizada por renovación de mobiliario"
}

### 55. Actualizar Solo Cantidad (sin observaciones)
PUT http://localhost:3001/api/aulas/{id}/equipamientos/{equipamientoId}
Content-Type: application/json

{
  "cantidad": 45
}

### 56. Actualizar Solo Observaciones (cantidad igual)
PUT http://localhost:3001/api/aulas/{id}/equipamientos/{equipamientoId}
Content-Type: application/json

{
  "cantidad": 45,
  "observaciones": "Estado: Bueno. Revisado en Nov 2025."
}

### 57. Error: Actualizar con Cantidad Inválida (negativa)
PUT http://localhost:3001/api/aulas/{id}/equipamientos/{equipamientoId}
Content-Type: application/json

{
  "cantidad": -10
}

### 58. Error: Actualizar con Cantidad Cero
PUT http://localhost:3001/api/aulas/{id}/equipamientos/{equipamientoId}
Content-Type: application/json

{
  "cantidad": 0
}

### 59. Error: Actualizar Equipamiento No Asignado
PUT http://localhost:3001/api/aulas/{id}/equipamientos/999
Content-Type: application/json

{
  "cantidad": 5
}

### 60. Remover Equipamiento de Aula
DELETE http://localhost:3001/api/aulas/{id}/equipamientos/{equipamientoId}

### 61. Error: Remover Equipamiento No Asignado
DELETE http://localhost:3001/api/aulas/{id}/equipamientos/999

### 62. Error: Remover Equipamiento de Aula Inexistente
DELETE http://localhost:3001/api/aulas/9999/equipamientos/{equipamientoId}

### 63. Filtrar Aulas por Tipo de Aula
GET http://localhost:3001/api/aulas?tipoAulaId=1

### 64. Filtrar Aulas por Estado de Aula
GET http://localhost:3001/api/aulas?estadoAulaId=1

### 65. Filtrar Aulas por Tipo Y Estado
GET http://localhost:3001/api/aulas?tipoAulaId=1&estadoAulaId=1

###################################################################
### NOTAS PARA LAS PRUEBAS:
###################################################################
#
# 1. IMPORTANTE: Ejecutar primero tests/equipamientos.http para crear equipamientos
# 2. Ejecutar casos de creación de aulas primero (tests 2-5, 37-38)
# 3. Anotar los IDs de aulas y equipamientos creados
# 4. Reemplazar {id} y {equipamientoId} con IDs reales en los tests subsiguientes
# 5. Usar fechas futuras para verificación de disponibilidad
# 6. Las fechas deben estar en formato ISO 8601
# 7. Probar casos de error para validar manejo de errores
# 8. Las estadísticas y reservas requerirán datos de reservas existentes
#
# NUEVOS CAMPOS:
# - tipoAulaId: ID del tipo de aula (tipos_aulas: TEORIA=1, PRACTICA=2, ESTUDIO=3, ENSAYO=4, AUDITORIO=5)
# - estadoAulaId: ID del estado (estados_aulas: DISPONIBLE=1, EN_MANTENIMIENTO=2, CERRADA=3, RESERVADA=4)
# - descripcion: Descripción detallada del aula (opcional)
# - observaciones: Observaciones adicionales (opcional)
# - equipamientos: Array de equipamientos al crear (opcional)
#
# GESTIÓN DE EQUIPAMIENTOS:
# - POST /aulas/{id}/equipamientos - Asignar equipamiento a aula
# - GET /aulas/{id}/equipamientos - Listar equipamientos del aula
# - PUT /aulas/{id}/equipamientos/{equipamientoId} - Actualizar cantidad
# - DELETE /aulas/{id}/equipamientos/{equipamientoId} - Remover equipamiento
#
# SECUENCIA RECOMENDADA:
# 1. Crear equipamientos (tests/equipamientos.http tests 2-6)
# 2. Crear aulas con nuevos campos (tests 2-5)
# 3. Asignar equipamientos a aulas (tests 44-46)
# 4. Consultar equipamientos (test 51)
# 5. Actualizar cantidades (tests 54-56)
# 6. Remover equipamientos (test 60)
# 7. Probar casos de error (tests 47-50, 57-59, 61-62)
#
###################################################################